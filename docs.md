<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [api](#api)
-   [http](#http)
-   [HttpError](#httperror)

## api

A lightweight wrapper around the [http](http) module.
Provides functions to make API requests with specified HTTP methods.

The functions are as follows:

-   `get(url, options)` sends a `'GET'` request
-   `patch(url, body, options)` sends a `'PATCH'` request
-   `post(url, body, options)` sends a `'POST'` request
-   `put(url, body, options)` sends a `'PUT'` request
-   `destroy(url, body, options)` sends a `'DELETE'` request
-   `call(url, method, body, options)` sends a request with specified method

Each function can be passed an `options` object, which will eventually be forwarded
to the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API).

Each function returns a promise, which will either resolve with a response object
or reject with an [HTTPError](HTTPError).

**Examples**

```javascript
function getUsers () {
  return api.get('/users', { credentials: 'include' })
}

getUsers()
   .then(res => console.log('The users are', res))
   .catch(err => console.log('An error occurred!', err))
```

## http

A wrapper function for the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)
that adds default request settings and handles CRSF token logic.

This function adds the following config settings to the given request:

    {
      credentials: 'same-origin',
      headers: [
        'Accept': 'application/json',
        'X-Requested-With': 'XMLHttpRequest',
        'Content-Type': 'application/json'
      ],
      mode: 'same-origin'
    }

Any one of these settings can be overriden using the passed-in config object.

In addition to the normal Fetch API settings, the config object may also contain two special settings just for `http`:

-   `'root'`: A path to be appended to the given endpoint (default=`''`).
-   `'crsf'`: The name of the `meta` tag containing the CSRF token (default=`'csrf-token'`). This can be set to `false` to prevent a token from being sent.

**Parameters**

-   `endpoint` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** The URL of the request
-   `config` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** An object containing config information for the `Fetch` request, as well as the extra keys noted above.

**Examples**

```javascript
function getUsers () {
  return http('/users', { 
     root: 'www.my.cool.api.com', 
     crsf: 'custom-token-name'
  })
}

getUsers()
   .then(res => console.log('The users are', res))
   .catch(err => console.log('An error occurred!', err))
```

Returns **[Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise)** A Promise that either resolves with the response or rejects with an [HttpError](#httperror).

## HttpError

**Extends Error**

An error class that is thrown by the [http](http) module when a request fails.

In addition to the standard [Error](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error) attributes, instances of `HttpError` include the following:

-   `status`: the status code of the response
-   `statusText`: the status text of the response
-   `response`: the full response object
-   `message`: A readable error message with format `<status> - <statusText>`

**Parameters**

-   `status` **[Number](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number)** the status code of the response
-   `statusText` **[String](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String)** the status text of the response
-   `response` **[Object](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object)** the full response object

**Examples**

```javascript
// Instantiated manually
const MyError = new HttpError(500, 'Something went wrong!')
console.log(MyError.toString()) // "HttpError: 500 - Something went wrong"

// Instantiated by http module
http('/bad-route').catch(err => console.log(err.name)) // -> "HttpError"
```
